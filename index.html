<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#003a5b">
    <meta name="description" content="YoungLife Expense Report Generator - Create professional expense reports with receipts">
    <title>YoungLife Expense Report Generator</title>

    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'yl-blue': '#003a5b',
                        'yl-green': '#91c83e',
                        'yl-dark': '#515151',
                        'yl-gray': '#999'
                    }
                }
            }
        }
    </script>

    <!-- Flatpickr CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="styles.css">
</head>
<body class="bg-gray-50">
    <!-- Password Modal -->
    <div id="passwordModal" class="modal">
        <div class="modal-content-custom">
            <div class="text-center mb-6">
                <svg viewBox="-0.1455788442283923 -0.14653142594654756 594.9296527572668 116.05853142594654" xmlns="http://www.w3.org/2000/svg" class="w-48 mx-auto mb-6">
                    <path d="M170.245 33.967a1.096 1.096 0 0 0-1.06.784L157.378 73.74c-.53-1.78-11.692-38.982-11.692-38.982a1.095 1.095 0 0 0-1.062-.79h-14.358a1.113 1.113 0 0 0-1.056 1.444L146.9 91.36a1.11 1.11 0 0 0 1.056.773h3.431c-.224.737-6.555 21.197-6.555 21.197a1.114 1.114 0 0 0 .164.99 1.166 1.166 0 0 0 .89.449h13.333a1.117 1.117 0 0 0 1.055-.761l7.465-22.637s0-.006 17.926-55.958a1.105 1.105 0 0 0-1.061-1.445zM188.006 55.985V70.12c0 15.147 8.804 23.161 25.461 23.161s25.46-8.014 25.46-23.161V55.985c0-15.154-8.803-23.168-25.46-23.168s-25.461 8.014-25.461 23.168zm16.233 14.594V55.53c0-6.067 2.671-8.544 9.228-8.544s9.228 2.477 9.228 8.544V70.58c0 6.074-2.671 8.538-9.228 8.538s-9.228-2.464-9.228-8.538zM280.434 33.967a1.106 1.106 0 0 0-1.107 1.109V73.22c-5.014 2.53-10.532 4.293-13.487 4.293-2.488 0-3.367-.885-3.367-3.379v-39.06a1.112 1.112 0 0 0-1.114-1.108h-14.016a1.108 1.108 0 0 0-1.11 1.108v40.551c0 11.717 4.624 17.655 13.746 17.655 6.192 0 14.47-2.08 21.7-5.43.152.542 1.013 3.484 1.013 3.484a1.114 1.114 0 0 0 1.068.797h10.679a1.112 1.112 0 0 0 1.115-1.11V35.076a1.112 1.112 0 0 0-1.115-1.108zM318.992 38.255c-.154-.538-1.014-3.491-1.014-3.491a1.112 1.112 0 0 0-1.062-.797H306.23a1.112 1.112 0 0 0-1.113 1.109v55.947a1.112 1.112 0 0 0 1.113 1.109h14.017a1.112 1.112 0 0 0 1.109-1.11V52.89c4.988-2.53 10.513-4.287 13.474-4.287 2.488 0 3.372.878 3.372 3.368v39.052a1.108 1.108 0 0 0 1.109 1.109h14.004a1.109 1.109 0 0 0 1.114-1.11v-40.55c0-11.71-4.623-17.655-13.738-17.655-6.174 0-14.454 2.089-21.7 5.438zM361.67 52.518v5.313c0 6.716 2.32 11.787 6.859 15.095-3.432 2.801-5.142 5.897-5.142 9.493 0 7.565 3.255 10.756 12.012 11.776-.03 0-.03 0 6.758.773l9.452 1.06c4.045.443 4.285.797 4.285 3.385 0 2.341-.488 3.367-12.217 3.367a76.814 76.814 0 0 1-18.568-2.376 1.099 1.099 0 0 0-.878.148 1.079 1.079 0 0 0-.484.742l-1.722 10.46a1.122 1.122 0 0 0 .774 1.24c6.975 2.158 16.167 2.918 21.917 2.918 20.219 0 26.387-4.145 26.387-17.766 0-9.246-3.874-13.627-12.938-14.653 0-.006-4.528-.478-4.528-.478l-11.676-1.25c-2.11-.224-2.11-.773-2.11-1.31 0-1.042.968-2.292 2.571-3.36.218.012 2.871.106 2.871.106 19.523 0 23.622-10.537 23.622-19.37v-5.295a20.82 20.82 0 0 0-1.55-7.99c.548-.154 4.993-1.386 4.993-1.386a1.095 1.095 0 0 0 .803-1.072v-7.012a1.108 1.108 0 0 0-1.11-1.109h-17.14a38.5 38.5 0 0 0-9.618-1.15c-15.632 0-23.362 6.446-23.622 19.701zm15.426 4.735v-4.251c0-4.246 1.34-6.699 8.197-6.699 6.952 0 8.308 2.453 8.308 6.699v4.25c0 4.777-2.17 6.464-8.308 6.464-6.055 0-8.197-1.687-8.197-6.463z" fill="#003a5b"/><g fill="#91c83e"><path d="M17.03.436A1.504 1.504 0 0 0 15.962 0H1.503A1.5 1.5 0 0 0 0 1.5v15.963a1.5 1.5 0 0 0 .441 1.061S22.118 40.19 24.482 42.547v46.901a1.497 1.497 0 0 0 1.504 1.498H46.6a1.503 1.503 0 0 0 1.505-1.498V32.14a1.49 1.49 0 0 0-.442-1.068zM111.085 78.003l-10.308-10.301a1.465 1.465 0 0 0-1.061-.442H80.748V11.502a1.497 1.497 0 0 0-2.56-1.062v-.003L57.572 31.055a1.489 1.489 0 0 0-.435 1.06v57.262a1.498 1.498 0 0 0 1.497 1.498h41.081a1.467 1.467 0 0 0 1.061-.442l10.308-10.307a1.495 1.495 0 0 0 0-2.123zM436.605 9.362l-13.734 9.215c-.436.3-.955.743-.955 1.298v71.148a1.113 1.113 0 0 0 1.115 1.109h14.01a1.11 1.11 0 0 0 1.108-1.11V10.268a1.128 1.128 0 0 0-.376-.838.9.9 0 0 0-1.168-.067zM451.3 9.85a1.11 1.11 0 0 0-1.11 1.108v16.198a1.11 1.11 0 0 0 1.11 1.11h14.015a1.112 1.112 0 0 0 1.108-1.11V10.958a1.111 1.111 0 0 0-1.108-1.107zm0 24.117a1.108 1.108 0 0 0-1.11 1.108v55.948a1.108 1.108 0 0 0 1.11 1.108h14.015a1.11 1.11 0 0 0 1.108-1.108V35.075a1.11 1.11 0 0 0-1.108-1.108zM483.884 27.269v6.698h-7.848a1.108 1.108 0 0 0-1.11 1.109v11.15a1.108 1.108 0 0 0 1.11 1.11h7.848v43.687a1.11 1.11 0 0 0 1.109 1.109h14.015a1.113 1.113 0 0 0 1.115-1.11V47.337h12.33a1.123 1.123 0 0 0 1.109-1.027l.8-11.174a1.164 1.164 0 0 0-.294-.819 1.1 1.1 0 0 0-.809-.349h-13.136v-5.896c0-4.098.784-5.549 5.207-5.549a39.51 39.51 0 0 1 7.8.897 1.135 1.135 0 0 0 .873-.178 1.118 1.118 0 0 0 .465-.754l1.493-10.812a1.116 1.116 0 0 0-.796-1.22 45.753 45.753 0 0 0-12.36-1.645c-12.736 0-18.92 6.038-18.92 18.459zM517.335 55.762v14.817c0 15.49 7.872 22.702 24.776 22.702a61.087 61.087 0 0 0 20.963-3.632 1.115 1.115 0 0 0 .69-1.262l-2.187-10.567a1.113 1.113 0 0 0-.525-.73 1.098 1.098 0 0 0-.884-.113 57.156 57.156 0 0 1-16.789 2.595c-8.396 0-9.81-2.566-9.81-8.309V69.5h30.018a1.112 1.112 0 0 0 1.115-1.109V56.445c0-10.142-2.394-23.628-23.056-23.628-15.91 0-24.311 7.937-24.311 22.945zm16.234-1.38c0-5.431 2.529-7.854 8.19-7.854 6.161 0 7.399 3.007 7.399 7.854v1.639h-15.59zM571.312 83.953a4.72 4.72 0 1 1-4.723 4.717 4.524 4.524 0 0 1 4.723-4.717zm0 8.396a3.677 3.677 0 1 0-3.627-3.679 3.42 3.42 0 0 0 3.627 3.68zm.154-3.052h-.892v1.43h-.724v-4.321h1.693c.96 0 1.355.413 1.355 1.15v.596a1.04 1.04 0 0 1-.625 1.02l1.145 1.556h-.885zm.052-2.213h-.944v1.538h.944c.465 0 .625-.182.625-.494v-.52c0-.418-.183-.524-.625-.524z"/></g>
                </svg>
            </div>
            <h2 class="text-2xl font-bold text-yl-blue mb-4" data-i18n="password_title">Enter Password</h2>
            <input type="password" id="passwordInput" placeholder="Password" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg mb-4 focus:border-yl-green focus:outline-none">
            <button id="passwordSubmit" class="w-full bg-yl-green hover:bg-green-600 text-white font-bold py-3 rounded-lg transition-colors" data-i18n="password_submit">Submit</button>
            <p id="passwordError" class="text-red-500 text-sm mt-3"></p>
        </div>
    </div>

    <!-- Main Application -->
    <div id="mainApp" class="hidden">
        <!-- Header -->
        <header class="bg-white shadow-md sticky top-0 z-50">
            <div class="max-w-7xl mx-auto px-4 py-4">
                <div class="flex items-center justify-between flex-wrap gap-4">
                    <svg viewBox="-0.1455788442283923 -0.14653142594654756 594.9296527572668 116.05853142594654" xmlns="http://www.w3.org/2000/svg" class="h-8 md:h-10">
                        <path d="M170.245 33.967a1.096 1.096 0 0 0-1.06.784L157.378 73.74c-.53-1.78-11.692-38.982-11.692-38.982a1.095 1.095 0 0 0-1.062-.79h-14.358a1.113 1.113 0 0 0-1.056 1.444L146.9 91.36a1.11 1.11 0 0 0 1.056.773h3.431c-.224.737-6.555 21.197-6.555 21.197a1.114 1.114 0 0 0 .164.99 1.166 1.166 0 0 0 .89.449h13.333a1.117 1.117 0 0 0 1.055-.761l7.465-22.637s0-.006 17.926-55.958a1.105 1.105 0 0 0-1.061-1.445zM188.006 55.985V70.12c0 15.147 8.804 23.161 25.461 23.161s25.46-8.014 25.46-23.161V55.985c0-15.154-8.803-23.168-25.46-23.168s-25.461 8.014-25.461 23.168zm16.233 14.594V55.53c0-6.067 2.671-8.544 9.228-8.544s9.228 2.477 9.228 8.544V70.58c0 6.074-2.671 8.538-9.228 8.538s-9.228-2.464-9.228-8.538zM280.434 33.967a1.106 1.106 0 0 0-1.107 1.109V73.22c-5.014 2.53-10.532 4.293-13.487 4.293-2.488 0-3.367-.885-3.367-3.379v-39.06a1.112 1.112 0 0 0-1.114-1.108h-14.016a1.108 1.108 0 0 0-1.11 1.108v40.551c0 11.717 4.624 17.655 13.746 17.655 6.192 0 14.47-2.08 21.7-5.43.152.542 1.013 3.484 1.013 3.484a1.114 1.114 0 0 0 1.068.797h10.679a1.112 1.112 0 0 0 1.115-1.11V35.076a1.112 1.112 0 0 0-1.115-1.108zM318.992 38.255c-.154-.538-1.014-3.491-1.014-3.491a1.112 1.112 0 0 0-1.062-.797H306.23a1.112 1.112 0 0 0-1.113 1.109v55.947a1.112 1.112 0 0 0 1.113 1.109h14.017a1.112 1.112 0 0 0 1.109-1.11V52.89c4.988-2.53 10.513-4.287 13.474-4.287 2.488 0 3.372.878 3.372 3.368v39.052a1.108 1.108 0 0 0 1.109 1.109h14.004a1.109 1.109 0 0 0 1.114-1.11v-40.55c0-11.71-4.623-17.655-13.738-17.655-6.174 0-14.454 2.089-21.7 5.438zM361.67 52.518v5.313c0 6.716 2.32 11.787 6.859 15.095-3.432 2.801-5.142 5.897-5.142 9.493 0 7.565 3.255 10.756 12.012 11.776-.03 0-.03 0 6.758.773l9.452 1.06c4.045.443 4.285.797 4.285 3.385 0 2.341-.488 3.367-12.217 3.367a76.814 76.814 0 0 1-18.568-2.376 1.099 1.099 0 0 0-.878.148 1.079 1.079 0 0 0-.484.742l-1.722 10.46a1.122 1.122 0 0 0 .774 1.24c6.975 2.158 16.167 2.918 21.917 2.918 20.219 0 26.387-4.145 26.387-17.766 0-9.246-3.874-13.627-12.938-14.653 0-.006-4.528-.478-4.528-.478l-11.676-1.25c-2.11-.224-2.11-.773-2.11-1.31 0-1.042.968-2.292 2.571-3.36.218.012 2.871.106 2.871.106 19.523 0 23.622-10.537 23.622-19.37v-5.295a20.82 20.82 0 0 0-1.55-7.99c.548-.154 4.993-1.386 4.993-1.386a1.095 1.095 0 0 0 .803-1.072v-7.012a1.108 1.108 0 0 0-1.11-1.109h-17.14a38.5 38.5 0 0 0-9.618-1.15c-15.632 0-23.362 6.446-23.622 19.701zm15.426 4.735v-4.251c0-4.246 1.34-6.699 8.197-6.699 6.952 0 8.308 2.453 8.308 6.699v4.25c0 4.777-2.17 6.464-8.308 6.464-6.055 0-8.197-1.687-8.197-6.463z" fill="#003a5b"/><g fill="#91c83e"><path d="M17.03.436A1.504 1.504 0 0 0 15.962 0H1.503A1.5 1.5 0 0 0 0 1.5v15.963a1.5 1.5 0 0 0 .441 1.061S22.118 40.19 24.482 42.547v46.901a1.497 1.497 0 0 0 1.504 1.498H46.6a1.503 1.503 0 0 0 1.505-1.498V32.14a1.49 1.49 0 0 0-.442-1.068zM111.085 78.003l-10.308-10.301a1.465 1.465 0 0 0-1.061-.442H80.748V11.502a1.497 1.497 0 0 0-2.56-1.062v-.003L57.572 31.055a1.489 1.489 0 0 0-.435 1.06v57.262a1.498 1.498 0 0 0 1.497 1.498h41.081a1.467 1.467 0 0 0 1.061-.442l10.308-10.307a1.495 1.495 0 0 0 0-2.123zM436.605 9.362l-13.734 9.215c-.436.3-.955.743-.955 1.298v71.148a1.113 1.113 0 0 0 1.115 1.109h14.01a1.11 1.11 0 0 0 1.108-1.11V10.268a1.128 1.128 0 0 0-.376-.838.9.9 0 0 0-1.168-.067zM451.3 9.85a1.11 1.11 0 0 0-1.11 1.108v16.198a1.11 1.11 0 0 0 1.11 1.11h14.015a1.112 1.112 0 0 0 1.108-1.11V10.958a1.111 1.111 0 0 0-1.108-1.107zm0 24.117a1.108 1.108 0 0 0-1.11 1.108v55.948a1.108 1.108 0 0 0 1.11 1.108h14.015a1.11 1.11 0 0 0 1.108-1.108V35.075a1.11 1.11 0 0 0-1.108-1.108zM483.884 27.269v6.698h-7.848a1.108 1.108 0 0 0-1.11 1.109v11.15a1.108 1.108 0 0 0 1.11 1.11h7.848v43.687a1.11 1.11 0 0 0 1.109 1.109h14.015a1.113 1.113 0 0 0 1.115-1.11V47.337h12.33a1.123 1.123 0 0 0 1.109-1.027l.8-11.174a1.164 1.164 0 0 0-.294-.819 1.1 1.1 0 0 0-.809-.349h-13.136v-5.896c0-4.098.784-5.549 5.207-5.549a39.51 39.51 0 0 1 7.8.897 1.135 1.135 0 0 0 .873-.178 1.118 1.118 0 0 0 .465-.754l1.493-10.812a1.116 1.116 0 0 0-.796-1.22 45.753 45.753 0 0 0-12.36-1.645c-12.736 0-18.92 6.038-18.92 18.459zM517.335 55.762v14.817c0 15.49 7.872 22.702 24.776 22.702a61.087 61.087 0 0 0 20.963-3.632 1.115 1.115 0 0 0 .69-1.262l-2.187-10.567a1.113 1.113 0 0 0-.525-.73 1.098 1.098 0 0 0-.884-.113 57.156 57.156 0 0 1-16.789 2.595c-8.396 0-9.81-2.566-9.81-8.309V69.5h30.018a1.112 1.112 0 0 0 1.115-1.109V56.445c0-10.142-2.394-23.628-23.056-23.628-15.91 0-24.311 7.937-24.311 22.945zm16.234-1.38c0-5.431 2.529-7.854 8.19-7.854 6.161 0 7.399 3.007 7.399 7.854v1.639h-15.59zM571.312 83.953a4.72 4.72 0 1 1-4.723 4.717 4.524 4.524 0 0 1 4.723-4.717zm0 8.396a3.677 3.677 0 1 0-3.627-3.679 3.42 3.42 0 0 0 3.627 3.68zm.154-3.052h-.892v1.43h-.724v-4.321h1.693c.96 0 1.355.413 1.355 1.15v.596a1.04 1.04 0 0 1-.625 1.02l1.145 1.556h-.885zm.052-2.213h-.944v1.538h.944c.465 0 .625-.182.625-.494v-.52c0-.418-.183-.524-.625-.524z"/></g>
                    </svg>

                    <h1 class="text-xl md:text-2xl font-bold text-yl-blue flex-1 text-center hidden md:block" data-i18n="app_title">Expense Report Generator</h1>

                    <div class="flex items-center gap-3">
                        <button id="darkModeToggle" class="text-yl-blue hover:text-yl-green transition-colors" title="Toggle Dark Mode">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"/>
                            </svg>
                        </button>
                        <button id="editProfileBtn" class="text-yl-blue hover:text-yl-green transition-colors" title="Edit Profile">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                            </svg>
                        </button>
                        <button id="exportDataBtn" class="text-yl-blue hover:text-yl-green transition-colors hidden md:block" title="Export Data">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
                            </svg>
                        </button>
                        <button id="importDataBtn" class="text-yl-blue hover:text-yl-green transition-colors hidden md:block" title="Import Data">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"/>
                            </svg>
                        </button>
                        <div class="flex gap-1">
                            <button class="lang-btn px-3 py-1 rounded font-bold text-sm transition-all" data-lang="en">EN</button>
                            <button class="lang-btn px-3 py-1 rounded font-bold text-sm transition-all" data-lang="es">ES</button>
                            <button class="lang-btn px-3 py-1 rounded font-bold text-sm transition-all" data-lang="ca">CA</button>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- User Profile Modal -->
        <div id="profileModal" class="modal hidden">
            <div class="modal-content-custom">
                <h2 class="text-2xl font-bold text-yl-blue mb-6" data-i18n="profile_title">User Profile</h2>
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-semibold text-yl-dark mb-2" data-i18n="full_name">Full Name</label>
                        <input type="text" id="profileName" class="w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-yl-green focus:outline-none">
                    </div>
                    <div>
                        <label class="block text-sm font-semibold text-yl-dark mb-2" data-i18n="area">Area</label>
                        <input type="text" id="profileArea" class="w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-yl-green focus:outline-none">
                    </div>
                    <button id="saveProfile" class="w-full bg-yl-green hover:bg-green-600 text-white font-bold py-3 rounded-lg transition-colors" data-i18n="save_profile">Save Profile</button>
                </div>
            </div>
        </div>

        <!-- Toast Notification Container -->
        <div id="toastContainer" class="fixed top-20 right-4 z-50 space-y-2"></div>

        <!-- Hidden Import Input -->
        <input type="file" id="importFileInput" accept=".json" class="hidden">

        <!-- Main Content -->
        <main class="max-w-7xl mx-auto px-4 py-6 pb-24 md:pb-6">
            <!-- Quick Actions Bar -->
            <div class="bg-white rounded-lg shadow-md p-4 mb-6 flex flex-wrap gap-3 items-center justify-between">
                <div class="flex gap-2 flex-wrap">
                    <button id="duplicateLastBtn" class="btn-action" title="Duplicate Last Expense">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                        </svg>
                        <span data-i18n="duplicate_last">Duplicate Last</span>
                    </button>
                    <button id="clearAllBtn" class="btn-action text-red-600 hover:bg-red-50" title="Clear All Data">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                        </svg>
                        <span data-i18n="clear_all">Clear All</span>
                    </button>
                </div>
                <div class="flex gap-2">
                    <button id="todayBtn" class="btn-date">📅 <span data-i18n="today">Today</span></button>
                    <button id="yesterdayBtn" class="btn-date">🕐 <span data-i18n="yesterday">Yesterday</span></button>
                </div>
            </div>

            <!-- Progress Indicator -->
            <div class="bg-white rounded-lg shadow-md p-6 mb-6">
                <div class="flex items-center justify-between mb-4">
                    <div class="flex-1 text-center">
                        <div class="progress-step active" id="step1">
                            <span class="text-2xl">📝</span>
                            <p class="text-xs mt-2 font-semibold" data-i18n="step_expenses">Add Expenses</p>
                        </div>
                    </div>
                    <div class="flex-1 border-t-2 border-gray-300" id="line1"></div>
                    <div class="flex-1 text-center">
                        <div class="progress-step" id="step2">
                            <span class="text-2xl">📸</span>
                            <p class="text-xs mt-2 font-semibold" data-i18n="step_receipts">Add Receipts</p>
                        </div>
                    </div>
                    <div class="flex-1 border-t-2 border-gray-300" id="line2"></div>
                    <div class="flex-1 text-center">
                        <div class="progress-step" id="step3">
                            <span class="text-2xl">📄</span>
                            <p class="text-xs mt-2 font-semibold" data-i18n="step_generate">Generate PDF</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Summary Cards -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                <div class="bg-white rounded-lg shadow-md p-6 border-l-4 border-yl-blue">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm text-gray-600" data-i18n="total_expenses">Total Expenses</p>
                            <p class="text-3xl font-bold text-yl-blue"><span id="expenseCount">0</span></p>
                        </div>
                        <span class="text-4xl">💰</span>
                    </div>
                </div>
                <div class="bg-white rounded-lg shadow-md p-6 border-l-4 border-yl-green">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm text-gray-600" data-i18n="total_amount">Total Amount</p>
                            <p class="text-3xl font-bold text-yl-green" id="totalAmount">0.00€</p>
                        </div>
                        <span class="text-4xl">💵</span>
                    </div>
                </div>
                <div class="bg-white rounded-lg shadow-md p-6 border-l-4 border-yellow-500">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm text-gray-600" data-i18n="total_receipts">Total Receipts</p>
                            <p class="text-3xl font-bold text-yellow-600" id="receiptCount">0</p>
                        </div>
                        <span class="text-4xl">🧾</span>
                    </div>
                </div>
            </div>

            <!-- Expense Form -->
            <div class="bg-white rounded-lg shadow-md p-6 mb-6">
                <h2 class="text-2xl font-bold text-yl-blue mb-6" data-i18n="add_expense">Add Expense</h2>
                <form id="expenseForm" class="space-y-4">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-semibold text-yl-dark mb-2" data-i18n="category">Category</label>
                            <select id="expenseCategory" class="w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-yl-green focus:outline-none">
                                <option value="food" data-i18n="cat_food">🍽️ Food</option>
                                <option value="transport" data-i18n="cat_transport">🚗 Transport</option>
                                <option value="accommodation" data-i18n="cat_accommodation">🏠 Accommodation</option>
                                <option value="materials" data-i18n="cat_materials">📦 Materials</option>
                                <option value="others" data-i18n="cat_others">➕ Others</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-semibold text-yl-dark mb-2" data-i18n="expense_type">Expense Type</label>
                            <select id="expenseType" class="w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-yl-green focus:outline-none">
                                <option value="general" data-i18n="type_general">General Expense</option>
                                <option value="driving" data-i18n="type_driving">Driving</option>
                            </select>
                        </div>

                        <div id="amountGroup">
                            <label class="block text-sm font-semibold text-yl-dark mb-2" data-i18n="amount">Amount (€)</label>
                            <input type="number" id="amount" step="0.01" min="0" class="w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-yl-green focus:outline-none">
                        </div>

                        <div id="kmGroup" class="hidden">
                            <label class="block text-sm font-semibold text-yl-dark mb-2" data-i18n="kilometers">Kilometers</label>
                            <input type="number" id="kilometers" step="0.1" min="0" class="w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-yl-green focus:outline-none">
                            <p class="text-xs text-gray-500 mt-1" data-i18n="km_rate">Rate: 0.26€ per km</p>
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-semibold text-yl-dark mb-2" data-i18n="description">Description</label>
                        <textarea id="description" rows="3" class="w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-yl-green focus:outline-none"></textarea>
                    </div>

                    <div>
                        <label class="block text-sm font-semibold text-yl-dark mb-2" data-i18n="date">Date</label>
                        <input type="text" id="date" class="w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-yl-green focus:outline-none">
                    </div>

                    <button type="submit" class="w-full bg-yl-green hover:bg-green-600 text-white font-bold py-3 rounded-lg transition-all transform hover:scale-105" data-i18n="add_expense_btn">Add Expense</button>
                </form>
            </div>

            <!-- Expenses List -->
            <div class="bg-white rounded-lg shadow-md p-6 mb-6">
                <h2 class="text-2xl font-bold text-yl-blue mb-6" data-i18n="expenses_list">Expenses List</h2>
                <div id="expensesList" class="space-y-3">
                    <div class="text-center py-12 text-gray-400">
                        <span class="text-6xl block mb-4">📋</span>
                        <p data-i18n="no_expenses">No expenses added yet</p>
                    </div>
                </div>
            </div>

            <!-- Receipt Upload -->
            <div class="bg-white rounded-lg shadow-md p-6 mb-6">
                <h2 class="text-2xl font-bold text-yl-blue mb-6" data-i18n="upload_receipts">Upload Receipts</h2>

                <!-- Upload Options -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                    <button type="button" id="openCameraBtn" class="bg-yl-green hover:bg-green-600 text-white font-bold py-4 rounded-lg transition-all transform hover:scale-105 flex items-center justify-center gap-3">
                        <span class="text-3xl">📸</span>
                        <span data-i18n="take_photo">Take Photo</span>
                    </button>
                    <button type="button" id="selectFilesBtn" class="bg-yl-blue hover:bg-blue-900 text-white font-bold py-4 rounded-lg transition-all transform hover:scale-105 flex items-center justify-center gap-3">
                        <span class="text-3xl">📁</span>
                        <span data-i18n="select_files">Upload Files</span>
                    </button>
                </div>

                <div id="dropZone" class="border-3 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-yl-green transition-colors cursor-pointer">
                    <span class="text-6xl block mb-4">📤</span>
                    <p class="text-lg font-semibold text-yl-dark mb-2" data-i18n="drag_drop">Drag & drop images here</p>
                    <p class="text-sm text-gray-500" data-i18n="or_use_buttons">or use the buttons above</p>
                    <input type="file" id="receiptUpload" accept="image/*" multiple class="hidden">
                </div>
                <div id="receiptPreview" class="grid grid-cols-2 md:grid-cols-4 gap-4 mt-6"></div>
            </div>

            <!-- Generate PDF -->
            <button id="generatePDF" class="w-full bg-yl-blue hover:bg-blue-900 text-white font-bold py-4 rounded-lg text-xl shadow-lg transition-all transform hover:scale-105 flex items-center justify-center gap-3">
                <span data-i18n="generate_pdf">Generate PDF Report</span>
                <span class="text-2xl">🚀</span>
            </button>
        </main>

        <!-- Camera Modal -->
        <div id="cameraModal" class="modal hidden">
            <div class="modal-content-custom max-w-2xl w-full">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-2xl font-bold text-yl-blue" data-i18n="camera_title">Take Photo</h2>
                    <button id="closeCameraBtn" class="text-gray-500 hover:text-gray-700 text-3xl">&times;</button>
                </div>

                <div class="space-y-4">
                    <!-- Camera View -->
                    <div id="cameraView" class="relative">
                        <video id="cameraStream" autoplay playsinline class="w-full rounded-lg border-4 border-yl-blue" style="max-height: 400px;"></video>
                        <canvas id="cameraCanvas" class="hidden"></canvas>
                    </div>

                    <!-- Preview after capture -->
                    <div id="capturePreview" class="hidden">
                        <img id="capturedImage" class="w-full rounded-lg border-4 border-yl-green" alt="Captured">
                    </div>

                    <!-- Camera Controls -->
                    <div id="cameraControls" class="flex gap-3">
                        <button id="captureBtn" class="flex-1 bg-yl-green hover:bg-green-600 text-white font-bold py-3 rounded-lg transition-colors flex items-center justify-center gap-2">
                            <span class="text-2xl">📷</span>
                            <span data-i18n="capture">Capture</span>
                        </button>
                    </div>

                    <!-- Preview Controls -->
                    <div id="previewControls" class="hidden flex gap-3">
                        <button id="retakeBtn" class="flex-1 bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 rounded-lg transition-colors" data-i18n="retake">Retake</button>
                        <button id="usePhotoBtn" class="flex-1 bg-yl-green hover:bg-green-600 text-white font-bold py-3 rounded-lg transition-colors" data-i18n="use_photo">Use Photo</button>
                    </div>

                    <!-- Error message -->
                    <p id="cameraError" class="text-red-500 text-center hidden"></p>
                </div>
            </div>
        </div>

        <!-- Developer Footer -->
        <footer class="bg-yl-blue text-white py-6 mt-12">
            <div class="max-w-7xl mx-auto px-4 text-center">
                <p class="text-sm opacity-90" data-i18n="developed_by">Developed by</p>
                <p class="font-bold text-lg text-yl-green">Santi</p>
                <p class="text-xs opacity-75 mt-2">© 2025 YoungLife</p>
            </div>
        </footer>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="i18n.js"></script>
    <script src="app.js"></script>
    <script src="pdf-generator.js"></script>

    <!-- Register Service Worker -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(reg => console.log('Service Worker registered'))
                    .catch(err => console.log('Service Worker registration failed'));
            });
        }
    </script>
</body>
</html>
